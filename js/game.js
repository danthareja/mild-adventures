!function t(e,i,a){function n(r,s){if(!i[r]){if(!e[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(o)return o(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[r]={exports:{}};e[r][0].call(c.exports,function(t){var i=e[r][1][t];return n(i?i:t)},c,c.exports,t,e,i,a)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<a.length;r++)n(a[r]);return n}({1:[function(t,e,i){!function(t,i){"function"==typeof define&&define.amd?define(function(){return t.GyroNorm=i()}):"object"==typeof e&&e.exports?e.exports=t.GyroNorm=i():t.GyroNorm=i()}(this,function(){function t(t){return Math.round(t*Math.pow(10,A))/Math.pow(10,A)}function e(){var e={};e=O?p.getScreenAdjustedEuler():p.getFixedFrameEuler();var i=y.getScreenAdjustedAcceleration(),n=y.getScreenAdjustedAccelerationIncludingGravity(),o=y.getScreenAdjustedRotationRate(),r=0;b===a?(r=e.alpha-c,r=0>r?360-Math.abs(r):r):r=e.alpha;var s={"do":{alpha:t(r),beta:t(e.beta),gamma:t(e.gamma),absolute:p.isAbsolute()},dm:{x:t(i.x),y:t(i.y),z:t(i.z),gx:t(n.x),gy:t(n.y),gz:t(n.z),alpha:t(o.alpha),beta:t(o.beta),gamma:t(o.gamma)}};return g&&(s.dm.gx*=h,s.dm.gy*=h,s.dm.gz*=h),s}function i(t){m&&("string"==typeof t&&(t={message:t,code:0}),m(t))}var a="game",n="world",o="deviceorientation",r="acceleration",s="accelerationinludinggravity",l="rotationrate",u=null,c=0,h=0,d=!1,f=!1,p=null,y=null,v=50,g=!0,b=a,A=2,m=null,O=!1,I=function(t){};return I.GAME=a,I.WORLD=n,I.DEVICE_ORIENTATION=o,I.ACCELERATION=r,I.ACCELERATION_INCLUDING_GRAVITY=s,I.ROTATION_RATE=l,I.prototype.init=function(t){t&&t.frequency&&(v=t.frequency),t&&t.gravityNormalized&&(g=t.gravityNormalized),t&&t.orientationBase&&(b=t.orientationBase),t&&t.decimalCount&&(A=t.decimalCount),t&&t.logger&&(m=t.logger),t&&t.screenAdjusted&&(O=t.screenAdjusted);var e=new FULLTILT.getDeviceOrientation({type:b}).then(function(t){p=t}),i=(new FULLTILT.getDeviceMotion).then(function(t){y=t,h=y.getScreenAdjustedAccelerationIncludingGravity().z>0?1:-1});return Promise.all([e,i]).then(function(){f=!0})},I.prototype.end=function(){try{f=!1,this.stop(),y.stop(),p.stop()}catch(t){i(t)}},I.prototype.start=function(t){return f?(u=setInterval(function(){t(e())},v),void(d=!0)):void i({message:'GyroNorm is not initialized yet. First call the "init()" function.',code:1})},I.prototype.stop=function(){u&&(clearInterval(u),d=!1)},I.prototype.normalizeGravity=function(t){g=t?!0:!1},I.prototype.setHeadDirection=function(){return O||b===n?!1:(c=p.getFixedFrameEuler().alpha,!0)},I.prototype.startLogging=function(t){t&&(m=t)},I.prototype.stopLogging=function(){m=null},I.prototype.isAvailable=function(t){switch(t){case o:return p.isAvailable(p.ALPHA)&&p.isAvailable(p.BETA)&&p.isAvailable(p.GAMMA);case r:return y.isAvailable(y.ACCELERATION_X)&&y.isAvailable(y.ACCELERATION_Y)&&y.isAvailable(y.ACCELERATION_Z);case s:return y.isAvailable(y.ACCELERATION_INCLUDING_GRAVITY_X)&&y.isAvailable(y.ACCELERATION_INCLUDING_GRAVITY_Y)&&y.isAvailable(y.ACCELERATION_INCLUDING_GRAVITY_Z);case l:return y.isAvailable(y.ROTATION_RATE_ALPHA)&&y.isAvailable(y.ROTATION_RATE_BETA)&&y.isAvailable(y.ROTATION_RATE_GAMMA);default:return{deviceOrientationAvailable:p.isAvailable(p.ALPHA)&&p.isAvailable(p.BETA)&&p.isAvailable(p.GAMMA),accelerationAvailable:y.isAvailable(y.ACCELERATION_X)&&y.isAvailable(y.ACCELERATION_Y)&&y.isAvailable(y.ACCELERATION_Z),accelerationIncludingGravityAvailable:y.isAvailable(y.ACCELERATION_INCLUDING_GRAVITY_X)&&y.isAvailable(y.ACCELERATION_INCLUDING_GRAVITY_Y)&&y.isAvailable(y.ACCELERATION_INCLUDING_GRAVITY_Z),rotationRateAvailable:y.isAvailable(y.ROTATION_RATE_ALPHA)&&y.isAvailable(y.ROTATION_RATE_BETA)&&y.isAvailable(y.ROTATION_RATE_GAMMA)}}},I.prototype.isRunning=function(){return d},I})},{}],2:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),s=function(t,e,i){for(var a=!0;a;){var n=t,o=e,r=i;s=u=l=void 0,a=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(r)}var u=Object.getPrototypeOf(n);if(null===u)return void 0;t=u,e=o,i=r,a=!0}},l=t("./Keyboard"),u=a(l),c=t("GyroNorm"),h=a(c),d=new h["default"],f=function(t){function e(t,i,a,o){n(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,a,"adventurer",o),this.MAX_SPEED=400,this.ACCELERATION=1e3,this.TRANSITION_SPEED=50,this.DRAG=1e3,this.JUMP_SPEED=-500,this.MIN_ANIMATION_SPEED=5,this.MAX_ANIMATION_SPEED=20,this.TRANSITION_ANIMATION_SPEED=20,this.jumping=!1,this.keyboard=new u["default"](t),this.addAnimations(),t.physics.enable(this,Phaser.Physics.ARCADE),this.body.collideWorldBounds=!0,this.body.maxVelocity.setTo(this.MAX_SPEED,10*this.MAX_SPEED),this.body.drag.setTo(this.DRAG,0),d.start(function(t){console.log("data.do.alpha",t["do"].alpha),console.log("data.do.beta",t["do"].beta),console.log("data.do.gamma",t["do"].gamma),console.log("data.dm.alpha",t.dm.alpha),console.log("data.dm.beta",t.dm.beta),console.log("data.dm.gamma",t.dm.gamma),this.body.acceleration=t["do"].gamma})}return o(e,t),r(e,[{key:"update",value:function(){console.log(this.body.acceleration.x),this.move(),this.animate()}},{key:"move",value:function(){this.body.acceleration.x=this.keyboard.leftInputIsActive()?-this.ACCELERATION:this.keyboard.rightInputIsActive()?this.ACCELERATION:0;var t=this.body.touching.down;t&&(this.jumps=2,this.jumping=!1),this.jumps>0&&this.keyboard.upInputIsActive(150)&&(this.body.velocity.y=this.JUMP_SPEED,this.jumping=!0),this.jumping&&this.keyboard.upInputReleased()&&(this.jumps--,this.jumping=!1)}},{key:"animate",value:function(){var t=Phaser.Math.mapLinear(Math.abs(this.body.velocity.x),0,this.MAX_SPEED,this.MIN_ANIMATION_SPEED,this.MAX_ANIMATION_SPEED);this.body.velocity.x<0&&(this.body.acceleration.x<0?Math.abs(this.body.velocity.x)<this.TRANSITION_SPEED&&this.animations.play("neutral-to-left"):Math.abs(this.body.velocity.x)<this.TRANSITION_SPEED&&this.animations.play("left-to-neutral"),Math.abs(this.body.velocity.x)>this.TRANSITION_SPEED&&(this.animateWalkLeft.isPlaying?this.animateWalkLeft.speed=t:this.animateWalkLeft.play(t,!0))),this.body.velocity.x>0&&(this.body.acceleration.x>0?Math.abs(this.body.velocity.x)<this.TRANSITION_SPEED&&this.animations.play("neutral-to-right"):Math.abs(this.body.velocity.x)<this.TRANSITION_SPEED&&this.animations.play("right-to-neutral"),Math.abs(this.body.velocity.x)>this.TRANSITION_SPEED&&(this.animateWalkRight.isPlaying?this.animateWalkRight.speed=t:this.animateWalkRight.play(t,!0)))}},{key:"addAnimations",value:function(){this.animateWalkLeft=this.animations.add("walk-left",["walk-left-4","walk-left-5","walk-left-6","walk-left-7","walk-left-8","walk-left-6"]),this.animateWalkRight=this.animations.add("walk-right",["walk-right-4","walk-right-5","walk-right-6","walk-right-7","walk-right-8","walk-right-6"]),this.animations.add("neutral-to-left",["walk-left-1","walk-left-2","walk-left-3"],this.TRANSITION_ANIMATION_SPEED,!1),this.animations.add("left-to-neutral",["walk-left-3","walk-left-2","walk-left-1","neutral"],this.TRANSITION_ANIMATION_SPEED,!1),this.animations.add("neutral-to-right",["walk-right-1","walk-right-2","walk-right-3"],this.TRANSITION_ANIMATION_SPEED,!1),this.animations.add("right-to-neutral",["walk-right-3","walk-right-2","walk-right-1","neutral"],this.TRANSITION_ANIMATION_SPEED,!1)}}]),e}(Phaser.Sprite);i["default"]=f,e.exports=i["default"]},{"./Keyboard":7,GyroNorm:1}],3:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),o=function(){function t(e){a(this,t),this.game=e,this.game.orientated=!1}return n(t,[{key:"init",value:function(){this.input.maxPointers=1,this.stage.disableVisibilityChange=!0,this.game.device.desktop?(this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.setMinMax(480,360,1024,768),this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.game.orientated=!0):(this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.setMinMax(480,360,1024,768),this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.scale.forceOrientation(!0,!1),this.scale.setResizeCallback(this.gameResized,this),this.scale.enterIncorrectOrientation.add(this.enterIncorrectOrientation,this),this.scale.leaveIncorrectOrientation.add(this.leaveIncorrectOrientation,this))}},{key:"preload",value:function(){this.game.load.image("ground","assets/ground-01.png"),this.game.load.image("background","assets/background.png"),this.game.load.image("tree","assets/tree.png"),this.game.load.atlasJSONHash("adventurer","assets/adventurer.png","assets/adventurer.json"),this.game.load.image("open_flower","assets/flower_open.png"),this.game.load.image("closed_flower","assets/flower_closed.png")}},{key:"create",value:function(){this.state.start("Game")}},{key:"gameResized",value:function(t,e){console.log("gameResized: "+t+"x"+e)}},{key:"enterIncorrectOrientation",value:function(){this.game.orientated=!1,document.getElementById("orientation").style.display="block"}},{key:"leaveIncorrectOrientation",value:function(){this.game.orientated=!0,document.getElementById("orientation").style.display="none"}}]),t}();i["default"]=o,e.exports=i["default"]},{}],4:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),r=function(t,e,i){for(var a=!0;a;){var n=t,o=e,r=i;s=u=l=void 0,a=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(r)}var u=Object.getPrototypeOf(n);if(null===u)return void 0;t=u,e=o,i=r,a=!0}},s=function(t){function e(t,i,n,o){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,n,"closed_flower",o),t.physics.enable(this),this.isOpen=!1,this.body.allowGravity=!1}return n(e,t),o(e,[{key:"swap",value:function(){this.isOpen=!this.isOpen,this.loadTexture(this.isOpen?"open_flower":"closed_flower")}}]),e}(Phaser.Sprite);i["default"]=s,e.exports=i["default"]},{}],5:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),r=t("./Ground"),s=a(r),l=t("./Tree"),u=a(l),c=t("./Flower"),h=a(c),d=t("./Keyboard"),f=a(d),p=t("./Adventurer"),y=a(p),v=function(){function t(e){n(this,t),this.GRAVITY=2600,this.game=e}return o(t,[{key:"create",value:function(){this.game.stage.backgroundColor="#ffffff",this.game.physics.arcade.gravity.y=this.GRAVITY,this.keyboard=new f["default"](this.game),this.addSprite("tree",new u["default"](this.game,0,0)),this.addSprite("ground",new s["default"](this.game,0,this.game.height-40)),this.addSprite("flower",new h["default"](this.game,this.game.width-300,this.game.height-143)),this.addSprite("player",new y["default"](this.game,this.game.width/2,this.game.height-78,"neutral"))}},{key:"addSprite",value:function(t,e){this[t]=e,this.game.add.existing(e)}},{key:"update",value:function(){this.game.physics.arcade.collide(this.player,this.ground),this.game.physics.arcade.collide(this.tree,this.ground),this.updateFlower()}},{key:"updateFlower",value:function(){this.recentFlowerOverlap=this.game.physics.arcade.overlap(this.player,this.flower,function(t,e){this.recentFlowerOverlap||e.swap()},null,this)}}]),t}();i["default"]=v,e.exports=i["default"]},{"./Adventurer":2,"./Flower":4,"./Ground":6,"./Keyboard":7,"./Tree":8}],6:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(t,e,i){for(var a=!0;a;){var n=t,o=e,r=i;s=u=l=void 0,a=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(r)}var u=Object.getPrototypeOf(n);if(null===u)return void 0;t=u,e=o,i=r,a=!0}},r=function(t){function e(t,i,n,r){a(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,n,"ground",r),t.physics.enable(this),this.body.immovable=!0,this.body.allowGravity=!1}return n(e,t),e}(Phaser.Sprite);i["default"]=r,e.exports=i["default"]},{}],7:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),r=function(t,e,i){for(var a=!0;a;){var n=t,o=e,r=i;s=u=l=void 0,a=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(r)}var u=Object.getPrototypeOf(n);if(null===u)return void 0;t=u,e=o,i=r,a=!0}},s=function(t){function e(t){a(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),t.input.keyboard.addKeyCapture([Phaser.Keyboard.LEFT,Phaser.Keyboard.RIGHT,Phaser.Keyboard.UP,Phaser.Keyboard.DOWN]),this.game=t}return n(e,t),o(e,[{key:"leftInputIsActive",value:function(){var t=!1;return t=this.game.input.keyboard.isDown(Phaser.Keyboard.LEFT),t|=this.game.input.activePointer.isDown&&this.game.input.activePointer.x<this.game.width/4}},{key:"rightInputIsActive",value:function(){var t=!1;return t=this.game.input.keyboard.isDown(Phaser.Keyboard.RIGHT),t|=this.game.input.activePointer.isDown&&this.game.input.activePointer.x>this.game.width/2+this.game.width/4}},{key:"upInputIsActive",value:function(t){var e=!1;return e=this.game.input.keyboard.downDuration(Phaser.Keyboard.UP,t),e|=this.game.input.activePointer.justPressed(t+1e3/60)&&this.game.input.activePointer.x>this.game.width/4&&this.game.input.activePointer.x<this.game.width/2+this.game.width/4}},{key:"upInputReleased",value:function(){var t=!1;return t=this.game.input.keyboard.upDuration(Phaser.Keyboard.UP),t|=this.game.input.activePointer.justReleased()}},{key:"downInputIsActive",value:function(){var t=!1;return t=this.game.input.keyboard.isDown(Phaser.Keyboard.DOWN),t|=this.game.input.activePointer.isDown&&this.game.input.activePointer.x<this.game.width/4}}]),e}(Phaser.Keyboard);i["default"]=s,e.exports=i["default"]},{}],8:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(t,e,i){for(var a=!0;a;){var n=t,o=e,r=i;s=u=l=void 0,a=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,o);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(r)}var u=Object.getPrototypeOf(n);if(null===u)return void 0;t=u,e=o,i=r,a=!0}},r=function(t){function e(t,i,n,r){a(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,n,"tree",r),t.physics.enable(this)}return n(e,t),e}(Phaser.Sprite);i["default"]=r,e.exports=i["default"]},{}],9:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}var n=t("./GameState"),o=a(n),r=t("./BootState"),s=a(r),l=new Phaser.Game(1024,768,Phaser.AUTO,"");l.state.add("Boot",s["default"]),l.state.add("Game",o["default"]),l.state.start("Boot")},{"./BootState":3,"./GameState":5}]},{},[9]);